<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      charset="UTF-8"
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <meta property="og:url" content="/rank-br" />
    <meta property="og:title" content="o!d brasil lb" />
    <meta
      property="og:description"
      content="Os melhores jogadores brasileiros de osu!droid :)"
    />
    <meta property="og:type" content="website" />
    <meta name="og:image" itemprop="image" content="" />
    <title>BR-DPP leaderboard</title>
    <style>
      .player-data:hover {
        cursor: pointer;
      }
    </style>
  </head>
  <body class="grey lighten-1">
    {% include "../nav.html" %}
    <main>
      <div id="top-players-div" class="grey lighten-1">
        {% if top_players_data %}
        <table class="highlight responsive-table">
          <thead>
            <tr>
              <th>Nickname</th>
              <th>Score</th>
              <th>Accuracy</th>
              <th>Aim</th>
              <th>Speed</th>
              <th>Reading</th>
              <th>Consistency</th>
              <th>Playcount</th>
              <th>Droid pp</th>
            </tr>
          </thead>
          <tbody>
            {% for user in top_players_data %}
            <tr
              onclick="location.href='/user/{{ user.user_id }}'"
              class="player-data"
            >
              <td>{{ user.username }}</td>
              <td>{{ user.total_score }}</td>
              <td>{{ user.overall_acc}}%</td>
              <td class="aim">{{ user.aim }}</td>
              <td class="speed">{{ user.speed }}</td>
              <td class="reading">{{ user.reading }}</td>
              <td class="consistency">{{ user.consistency }}</td>
              <td class="playcount">{{user.playcount}}</td>
              <td>{{ user.raw_pp }}</td>
            </tr>
            {% endfor %}
          </tbody>
          {% else %}
          <p>Não foi possível resgatar os dados.</p>
          {% endif %}
        </table>
      </div>
    </main>
  </body>
  <script>
    const aimValues = document.getElementsByClassName("aim");
    const speedValues = document.getElementsByClassName("speed");
    const readingValues = document.getElementsByClassName("reading");
    const consistencyValues = document.getElementsByClassName("consistency");
    [aimValues, speedValues, readingValues, consistencyValues].forEach(
      (item) => {
        Array.from(item).forEach((data) => {
          data.innerText = parseFloat(data.innerText).toFixed(2);
        });
      }
    );
  </script>
</html>
